{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst API_KEY = \"47415384-99a3119bdb6a092e7cf8e4330\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 40;\n\n/**\n * @param {string} query\n * @param {number} page\n * @returns {Promise<Object>}\n */\n\nexport async function fetchImages(currentPage, query) {\n  try {\n    const { data } = await axios.get(BASE_URL, {\n      params: {\n        key: `${API_KEY}`,\n        q: `${query}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: `${PER_PAGE}`,\n        page: `${currentPage}`,\n      },\n    });\n    return data;\n  } catch (error) {\n    console.error('Fetch Images Error:', error.message);\n    throw error;\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst gallery = document.createElement(\"div\");\ngallery.classList.add(\"gallery\");\ndocument.body.appendChild(gallery);\n\nconst loader = document.createElement(\"div\");\nloader.classList.add(\"loader\");\nloader.style.display = \"none\";\nloader.innerHTML = '<div class=\"css-loader\"></div>';\ndocument.body.appendChild(loader);\n\nconst form = document.createElement(\"form\");\nform.id = \"search-form\";\nform.innerHTML = `\n  <input type=\"text\" id=\"search-input\" placeholder=\"Search images...\">\n  <button type=\"submit\">Search</button>\n`;\ndocument.body.prepend(form);\n\nconst lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n  loader.style.display = \"none\";\n}\n\nexport function showLoadingToast() {\n  iziToast.info({\n    id: \"loading-toast\",\n    title: \"Loading\",\n    message: \"Fetching images, please wait...\",\n    timeout: false, // Сповіщення не зникає автоматично\n    close: false, // Забороняємо користувачу вручну закривати сповіщення\n    position: \"topRight\",\n  });\n}\n\nexport function hideLoadingToast() {\n  iziToast.hide({}, document.querySelector(\".iziToast#loading-toast\"));\n}\n\n\n/**\n * @param {Array} images\n */\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\">\n          <div>\n            <p>Likes: ${likes}</p>\n            <p>Views: ${views}</p>\n            <p>Comments: ${comments}</p>\n            <p>Downloads: ${downloads}</p>\n          </div>\n        </a>\n      `\n    )\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\n/**\n * @param {string} message\n */\nexport function showError(message) {\n  iziToast.error({\n    title: \"Error\",\n    message: message,\n  });\n}\n\n/**\n * @param {string} message\n */\nexport function showWarning(message) {\n  iziToast.warning({\n    title: \"No Results\",\n    message: message,\n  });\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport {\n  clearGallery,\n  renderGallery,\n  showLoader,\n  hideLoader,\n  showError,\n  showWarning,\n} from \"./js/render-functions.js\";\n\nconst form = document.getElementById(\"search-form\");\nconst input = document.getElementById(\"search-input\");\nconst loadMoreButton = document.querySelector(\".load-more\")\n\nlet currentPage = 1;\nlet currentQuery = \"\"\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    showError(\"Search field cannot be empty!\");\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery();\n  hideLoaderMoreButton();\n  showLoader();\n  \n  try {\n    const data = await fetchImages(currentPage, currentQuery);\n    totalHits = data.totalHits;\n    hideLoader();\n\n    if (!data.hits.length) {\n      showWarning(\"Sorry, there are no images matching your search query. Please try again!\");\n      return;\n    }\n\n    renderGallery(data.hits);\n\n    if (data.hits.length < totalHits) {\n      showLoaderMoreButton();\n    }\n\n  } catch (error) {\n    hideLoader();\n    showError(\"Something went wrong. Please try again later!\");\n  }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n  currentPage++;\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentPage, currentQuery);\n    hideLoader();\n\n    renderGallery(data.hits);\n\n    if (currentPage * 40 >= totalHits) {\n      hideLoaderMoreButton();\n      showWarning(\"We're sorry, but you've reached the end of search results.\")\n    }\n\n    scrollPage();\n  } catch (error) {\n    hideLoader();\n    showError(\"Something went wrong. Please try again later!\");\n  }\n});\n\nfunction showLoaderMoreButton() {\n  loadMoreButton.style.display = \"block\";\n}\n\nfunction hideLoaderMoreButton() {\n  loadMoreButton.style.display = \"none\";\n}\n\n  function scrollPage() {\n    const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behaior: \"smooth\",\n    });\n}\n\nexport function showLoadingToast() {\n  iziToast.info({\n    id: \"loading-toast\",\n    title: \"Loading\",\n    message: \"Fetching images, please wait...\",\n    timeout: false,\n    close: false,\n    position: \"topRight\",\n  });\n}\n\nexport function hideLoadingToast() {\n  iziToast.hide({}, document.querySelector(\".iziToast#loading-toast\"));\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","currentPage","query","data","axios","error","gallery","loader","form","lightbox","SimpleLightbox","clearGallery","showLoader","hideLoader","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showError","message","iziToast","showWarning","input","loadMoreButton","currentQuery","totalHits","e","hideLoaderMoreButton","showLoaderMoreButton","scrollPage","cardHeight"],"mappings":"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"}