{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"47415384-99a3119bdb6a092e7cf8e4330\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n/**\n * @param {string} query\n * @param {number} page\n * @param {number} perPage\n * @returns {Promise<Object>}\n */\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error(\"Fetch Images Error:\", error.message);\n    throw error;\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst gallery = document.createElement(\"div\");\ngallery.classList.add(\"gallery\");\ndocument.body.appendChild(gallery);\n\nconst loader = document.createElement(\"div\");\nloader.classList.add(\"loader\");\nloader.style.display = \"none\";\nloader.innerHTML = '<div class=\"css-loader\"></div>';\ndocument.body.appendChild(loader);\n\nconst lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n  loader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n  loader.style.display = \"none\";\n}\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\">\n          <div>\n            <p>Likes: ${likes}</p>\n            <p>Views: ${views}</p>\n            <p>Comments: ${comments}</p>\n            <p>Downloads: ${downloads}</p>\n          </div>\n        </a>\n      `\n    )\n    .join(\"\");\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  lightbox.refresh();\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: \"Error\",\n    message: message,\n  });\n}\n\nexport function showWarning(message) {\n  iziToast.warning({\n    title: \"No Results\",\n    message: message,\n  });\n}\n\nexport function showEndOfResultsMessage() {\n  iziToast.info({\n    title: \"End of Results\",\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport {\n  clearGallery,\n  renderGallery,\n  showLoader,\n  hideLoader,\n  showError,\n  showWarning,\n  showEndOfResultsMessage,\n} from \"./js/render-functions.js\";\n\nconst form = document.getElementById(\"search-form\");\nconst input = document.getElementById(\"search-input\");\nconst loadMoreBtn = document.createElement(\"button\");\nloadMoreBtn.textContent = \"Load more\";\nloadMoreBtn.classList.add(\"load-more\");\nloadMoreBtn.style.display = \"none\";\ndocument.body.appendChild(loadMoreBtn);\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault(); // Зупиняє перезавантаження сторінки\n  const query = input.value.trim(); // Отримує значення пошуку\n\n  if (!query) {\n    showError(\"Search field cannot be empty!\"); // Показує помилку\n    return;\n  }\n\n  // Скидає стан при новому пошуку\n  if (query !== currentQuery) {\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery();\n    loadMoreBtn.style.display = \"none\";\n  }\n\n  showLoader(); // Показує індикатор завантаження\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, 15); // Запит на сервер\n\n    hideLoader(); // Приховує індикатор завантаження\n\n    if (!data.hits.length) {\n      showWarning(\"Sorry, there are no images matching your search query.\"); // Попередження, якщо результатів немає\n      return;\n    }\n\n    totalHits = data.totalHits; // Зберігає загальну кількість результатів\n\n    renderGallery(data.hits); // Рендерить галерею\n\n    if (currentPage * 15 >= totalHits) {\n      showEndOfResultsMessage(); // Повідомлення про кінець результатів\n      loadMoreBtn.style.display = \"none\";\n    } else {\n      loadMoreBtn.style.display = \"block\"; // Показує кнопку \"Load more\"\n    }\n  } catch (error) {\n    hideLoader(); // Приховує індикатор завантаження при помилці\n    showError(\"Something went wrong. Please try again later!\");\n  }\n});\n\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  currentPage += 1;\n\n  showLoader();\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, 15);\n\n    hideLoader();\n\n    renderGallery(data.hits);\n\n    if (currentPage * 15 >= totalHits) {\n      showEndOfResultsMessage();\n      loadMoreBtn.style.display = \"none\";\n    }\n\n    const { height: cardHeight } = document\n      .querySelector(\".gallery\")\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n  } catch (error) {\n    hideLoader();\n    showError(\"Something went wrong. Please try again later!\");\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","gallery","loader","lightbox","SimpleLightbox","clearGallery","showLoader","hideLoader","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showError","message","iziToast","showWarning","showEndOfResultsMessage","form","input","loadMoreBtn","currentQuery","currentPage","totalHits","e","data","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAQV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACD,CAAA,iEAAiEC,CAAI,aAAaC,CAAO,GAE1F,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,sBAAuBA,EAAM,OAAO,EAC5CA,CACP,CACH,CClBA,MAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAU,IAAI,SAAS,EAC/B,SAAS,KAAK,YAAYA,CAAO,EAEjC,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAU,IAAI,QAAQ,EAC7BA,EAAO,MAAM,QAAU,OACvBA,EAAO,UAAY,iCACnB,SAAS,KAAK,YAAYA,CAAM,EAEhC,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,GAAe,CAC7BJ,EAAQ,UAAY,EACtB,CAEO,SAASK,GAAa,CAC3BJ,EAAO,MAAM,QAAU,OACzB,CAEO,SAASK,GAAa,CAC3BL,EAAO,MAAM,QAAU,MACzB,CAEO,SAASM,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACvE;AAAA,mBACWL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA,wBAExBC,CAAK;AAAA,wBACLC,CAAK;AAAA,2BACFC,CAAQ;AAAA,4BACPC,CAAS;AAAA;AAAA;AAAA,OAIhC,EACA,KAAK,EAAE,EACVhB,EAAQ,mBAAmB,YAAaS,CAAM,EAC9CP,EAAS,QAAO,CAClB,CAEO,SAASe,EAAUC,EAAS,CACjCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACb,CAAG,CACH,CAEO,SAASE,EAAYF,EAAS,CACnCC,EAAS,QAAQ,CACf,MAAO,aACP,QAASD,CACb,CAAG,CACH,CAEO,SAASG,GAA0B,CACxCF,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACb,CAAG,CACH,CC1DA,MAAMG,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,MAAM,QAAU,OAC5B,SAAS,KAAK,YAAYA,CAAW,EAErC,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EAEhBL,EAAK,iBAAiB,SAAU,MAAOM,GAAM,CAC3CA,EAAE,eAAc,EAChB,MAAMlC,EAAQ6B,EAAM,MAAM,KAAI,EAE9B,GAAI,CAAC7B,EAAO,CACVuB,EAAU,+BAA+B,EACzC,MACD,CAGGvB,IAAU+B,IACZA,EAAe/B,EACfgC,EAAc,EACdtB,IACAoB,EAAY,MAAM,QAAU,QAG9BnB,IAEA,GAAI,CACF,MAAMwB,EAAO,MAAMpC,EAAYgC,EAAcC,EAAa,EAAE,EAI5D,GAFApB,IAEI,CAACuB,EAAK,KAAK,OAAQ,CACrBT,EAAY,wDAAwD,EACpE,MACD,CAEDO,EAAYE,EAAK,UAEjBtB,EAAcsB,EAAK,IAAI,EAEnBH,EAAc,IAAMC,GACtBN,IACAG,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,OAE/B,MAAe,CACdlB,IACAW,EAAU,+CAA+C,CAC1D,CACH,CAAC,EAGDO,EAAY,iBAAiB,QAAS,SAAY,CAChDE,GAAe,EAEfrB,IAEA,GAAI,CACF,MAAMwB,EAAO,MAAMpC,EAAYgC,EAAcC,EAAa,EAAE,EAE5DpB,IAEAC,EAAcsB,EAAK,IAAI,EAEnBH,EAAc,IAAMC,IACtBN,IACAG,EAAY,MAAM,QAAU,QAG9B,KAAM,CAAE,OAAQM,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,MAAe,CACdxB,IACAW,EAAU,+CAA+C,CAC1D,CACH,CAAC"}